<!doctype html>
<html lang="en">

<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css" integrity="sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk"
        crossorigin="anonymous">
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.8.0/dist/leaflet.css" integrity="sha512-hoalWLoI8r4UszCkZ5kL8vayOGVae1oxXe/2A4AO6J9+580uKHDO3JdHb7NzwwzK5xr/Fs0W40kiNHxM9vyTtQ=="
        crossorigin="" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.13.1/font/bootstrap-icons.css">

    <link rel="stylesheet" type="text/css" href="styles.css" />

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?&family=Work+Sans:ital,wght@0,100..900;1,100..900&family=Open+Sans:wght@400&display=swap" rel="stylesheet">

    <script src="https://unpkg.com/leaflet@1.8.0/dist/leaflet.js" integrity="sha512-BB3hKbKWOc9Ez/TAwyWxNXeoV9c1v6FIeYiBieIWkpLjauysF18NzgR1MBNBXf8/KABdlkX68nAhlwcDFLGPCQ=="
        crossorigin=""></script>
    <script src="https://cdn.jsdelivr.net/gh/Falke-Design/L.Donut@latest/src/L.Donut.js"></script>

    <title>Invader Radar - OneSTOP</title>
    <link rel="canonical" href="https://simonrolph.github.io/easily_missed/" />
    <link rel="manifest" href="/easily_missed/manifest.webmanifest">
    <link rel="icon" type="image/svg" href="https://onestop-project.eu/storage/app/uploads/public/67d/d66/98d/67dd6698d4d01598372526.svg">
</head>
    <!-- Google tag (gtag.js) -->
<!-- <script async src="https://www.googletagmanager.com/gtag/js?id=G-7M7ZYNN94M"></script>-->
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-7M7ZYNN94M');
</script>

<body>

    <div class="container">
        <div class="progress" id="progbar">
            <div class="progress-bar progress-bar-striped bg-success progress-bar-animated" role="progressbar" style="width: 0%;">Waiting for GPS</div>
        </div>
        <div class="alert alert-warning alert-dismissible fade show" role="alert" style="margin-top:10px;">
            <strong>Prototype warning:</strong> This is an early prototype and should not be used for decision making.
            <button type="button" class="close" aria-label="Close" onclick="this.parentElement.style.display='none';">
                <span aria-hidden="true">&times;</span>
            </button>
        </div>
        <!--<p style="text-align-last: right"><a class="twitter-share-button" href="https://twitter.com/intent/tweet?text=Check%20out%20Easily%20Missed,%20an%20app%20to%20help%20recorders%20identify%20local%20gaps%20in%20species%20records">Tweet</a></p>-->
        <div class="error_message"></div>
        <img src="images/OneSTOP final logo-black.svg" width="200px;">
        <h1>Invader Radar</h1>
        <h4>Early warning system for invasive species.</h4>
        <p><a data-bs-toggle="modal" data-bs-target="#infoModal" href=""><i class="bi bi-info-circle"></i> About</a> -  <a href="#species_lists"> <i class="bi bi-arrow-down-circle"></i> Skip to species lists</a> - <a id="link_to_inat" target="_blank" href=""><i class="bi bi-box-arrow-up-right"></i> Explore area on iNaturalist </a> </p>
        
        

        <!-- Modal -->
        <div class="modal fade" id="infoModal" tabindex="-1" aria-labelledby="infoModalLabel" aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Back</button>
                    </div>
                    <div class="modal-body">
                        <h4>What is Invader Radar?</h4>
                        <p>Invader Radar is a prototype developed within the OneSTOP project, currently using <a href="https://www.inaturalist.org/" target="_blank">iNaturalist</a> data to identify nearby risks from invasive species.</p>

                        <p>It works by using iNaturalist data to look for non-native species which are already detected within a local radius, and then non-native species within a wider radius which may pose a future risk. These species are compared to reference datasets such as GB Invasive lists and information portals (e.g. GB-NNSIP) to determine their potential impact.</p>

                        <h4>Data sources</h4>
                        <p><strong>Live data (iNaturalist):</strong> species detections, counts, and map observations are fetched live from the iNaturalist API for your selected location and radii. Results can change as new observations are added to iNaturalist.</p>
                        <p><strong>List data (reference datasets):</strong> invasive and horizon-scan badges come from bundled species lists included in this app (UK listed invasive species, GB Horizon Scan 2025, and GB Horizon Scan 2019 categories). These lists are static until the app data is updated.</p>

                        <h4>Options</h4>

                        <p>You can alter the radius of the doughnut and the doughnut hole through the advanced options.</p>

                        <p>You can also provide parameters into the tool's URL which will affect the data that it gets from iNaturalist. This is much like you can use the search URL on the main iNaturalist website: <a href="https://www.inaturalist.org/pages/search+urls" target="_blank">https://www.inaturalist.org/pages/search+urls</a> </p>
                            
                        <p>For example if you're only interested in birds you could add this the URL <code>?iconic_taxa=Aves</code>. Try it out <a href="?iconic_taxa=Aves">here</a>.</p>

                        <h4>Provide feedback</h4>

                        <p>If you use GitHub you can submit issues about bugs or feature requests <a href="https://github.com/simonrolph/easily_missed/issues">here</a>.</p>
                        
                    </div>
                </div>
            </div>
        </div>

        

        <!-- map -->
        <div id="map" style="height: 420px;"></div>
        
        <div style="text-align: center;padding-top:10px;">
                <button type="button" class="btn btn-outline-primary" onclick="applySettings(false)"><i class="bi bi-pin-map-fill"></i> Move doughnut to new location</button>
                <button type="button" class="btn btn-outline-primary" onclick="applySettings(true)"><i class="bi bi-globe"></i> Return to GPS location</button>
                <button type="button" class="btn btn-outline-secondary" data-bs-toggle="collapse" data-bs-target="#collapseOptions" aria-expanded="false" aria-controls="collapseOptions"><i class="bi bi-gear"></i> Advanced options</button>
        </div>
                
        
        <!-- Advanced options -->
        <div class="collapse" id="collapseOptions">
            <div class="card card-body">
                <p>Set custom radii for the doughnut and pick a location by manually entering a latitude/longitude or by moving the map to automatically update values.</p>
                <form>
                    <label for="i_rad">Inner circle radius (km) </label>
                    <input type="number" id="i_rad" name="i_rad" min="0.25" max="20" value="1" step="0.25">
                </form> 
                <form>
                    <label for="o_rad">Outer circle radius (km) </label>
                    <input type="number" id="o_rad" name="o_rad" min="0.5" max="100" value="5" step="0.5">
                </form>
                <form> 
                    <label for="lat">Latitude </label><input type="number" name="lat" id="lat" value = "0">
                    <label for="lng">Longitude </label><input type="number" name="lng" id="lng" value = "0">
                </form>
                <button type="button" class="btn btn-outline-success" onclick="applySettings(false)">Apply settings</button>
            </div>
        </div>
        <br>

        <!-- headline numbers -->
        <div class="row" style="text-align: center;">
            <div class="col-sm">
                <h3 class="sp_count_1">-</h3>
                <p>Non-native species within <span class="i_rad_info">1</span>km</p>
            </div>
            <div class="col-sm">
                <h3 class="sp_count_2">-</h3>
                <p>Non-native species within <span class="o_rad_info">5</span>km</p>
            </div>
            <div class="col-sm">
                <h3 class="ratio">-</h3>
                <p>Local/Proximity ratio</p>
            </div>
        </div>

        <br>

        <ul class="nav nav-tabs" id="species_lists" role="tablist">
            <li class="nav-item" role="presentation">
                <button class="nav-link active" id="profile-tab" data-bs-toggle="tab" data-bs-target="#profile" type="button" role="tab" aria-controls="profile"
                    aria-selected="true"><h6><i class="bi bi-crosshair"></i> Local detections</h6></button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link" id="home-tab" data-bs-toggle="tab" data-bs-target="#home" type="button" role="tab" aria-controls="home"
                    aria-selected="false"><h6><i class="bi bi-radar"></i> Proximity detections</h6></button>
            </li>
        </ul>
        <div style="margin-top:8px;margin-bottom:8px;">
            <label for="iconic_filter">Filter by iconic taxon: </label>
            <select id="iconic_filter">
                <option value="">All</option>
            </select>
        </div>
        <div class="tab-content" id="species_list2">
            <div class="tab-pane fade" id="home" role="tabpanel" aria-labelledby="home-tab">
                <p>Species (and number of records) which have <b>not</b> been within <span class="i_rad_info">1</span>km of where you are, but have been recorded within
                    <span class="o_rad_info">5</span>km.</p>
                <div class="species_list">
                    <div class="d-flex justify-content-center">
                        <div class="spinner-border" role="status">
                            <span class="sr-only">Loading...</span>
                        </div>
                    </div>
                </div>
            </div>

            <div class="tab-pane fade show active" id="profile" role="tabpanel" aria-labelledby="profile-tab">
                <p>Species (and number of records) which have been recorded within <span class="i_rad_info">1</span>km of where you are.</p>
                <div class="species_list_recorded">
                    <div class="d-flex justify-content-center">
                        <div class="spinner-border" role="status">
                            <span class="sr-only">Loading...</span>
                        </div>
                    </div>
                </div>
            </div>

        </div>

        <br>

            <img src="images/powered_by.png" class="img-fluid center">
            <br>

    </div>


    <script>
        // Load external JavaScript modules
    </script>

    <!-- Core configuration -->
    <script src="js/config.js"></script>

    <!-- Invasive species data -->
    <script src="js/data_invasive-species.js"></script>

    <!-- NNSIP species data -->
    <script src="js/data_NNSIP.js"></script>

    <!-- 2025 horizon scan species data -->
    <script src="js/data_horizon_scan_2025.js"></script>

    <!-- 2019 horizon scan species data -->
    <script src="js/data_horizon_scan_2019.js"></script>

    <!-- API utilities -->
    <script src="js/api.js"></script>

    <!-- URL parameter handling -->
    <script src="js/url-params.js"></script>

    <!-- UI utilities -->
    <script src="js/ui.js"></script>

    <!-- Map utilities -->
    <script src="js/map.js"></script>

    <!-- Application logic -->
    <script src="js/app.js"></script>

    <!-- Data processing -->
    <script src="js/data-processing.js"></script>

    <!-- Initialization -->
    <script src="js/init.js"></script>


    
    <script>
        // pwa
        if (navigator.serviceWorker) {
          navigator.serviceWorker.register (
            '/easily_missed/sw.js',
            {scope: '/easily_missed/'}
          )
        }
    </script>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p"
        crossorigin="anonymous"></script>

</body>

</html>
